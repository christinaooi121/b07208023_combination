<!doctype html>
<html lang="en">

<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type='text/javascript' src='testwebjs.js'></script>

    <link rel="stylesheet" href="combination.css">
    <title>Composition</title>
</head>

<body>
    <script>
        $(function() {
            var h_pos = $("#horizontal").offset().top;
            var hframe_h = $("#hframe").height();
            var winh = $(window).height();
            var max_scroll = $(document).height() - $(window).height();
            var max_w = $("#horizontal").width() - $(window).width();
            var video1_pos = $("#video1").offset().top;
            var video2_pos = $("#video2").offset().top;
            var video1_end = $("#video1").offset().top + $("#v1frame").height();
            var video2_end = $("#video2").offset().top + $("#v2frame").height();
            $(window).on("resize", function () {
                winh = $(window).height();
                max_scroll = $(document).height() - $(window).height();
                max_w = $("#horizontal").width() - $(window).width();
            });
            $(window).scroll(function () {
                var scrolled = $(window).scrollTop();
                /*Horizontal Image*/
                if (scrolled > h_pos && scrolled < h_pos + hframe_h - winh) {
                    var new_left = -1 * max_w * ((scrolled - h_pos) / (hframe_h - winh));
                    $("#horizontal").css({
                        left: new_left
                    });
                }

                /*Slide photos*/
                $(".slideanimate").each(function () {
                    var objpos = $(this).offset().top;
                    if (objpos < scrolled + winh * 0.8) {
                        $(this).addClass("slide");
                    }
                });

                /*Video Triggered*/
                console.log(scrolled);
                if (scrolled > video1_pos && scrolled < video1_end) {
                    $("#video1")[0].play();
                } else {
                    $("#vidoe1")[0].pause();
                }
            });
        });
    </script>
    <div class="container-fluid px-0">


        <div style="height:100vh; background-color:maroon; background-image:linear-gradient(maroon, black);">
            <h1>我是一個標題。</h1>
        </div>
        <div style="padding:20%; background-color:black; height:20vh;">
            <p style="color:white;">
                從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：……」。」。」。
            </p>
        </div>
        <div id="hframe" style="height:500vh">
            <div class="sticky-top">
                <div id="horizontal">
                    <img src="https://static01.nyt.com/newsgraphics/2016/07/14/france-attack-scroller/9ec6dcec7e22fffa81a21fb790ba566f2c6aee83/base-big.jpg"
                        style="height:100vh;width:auto" />
                </div>
            </div>
        </div>
        <div style="padding:20%; background-color:black; height:20vh;">
            <p style="color:white;">
                從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：……」。」。」。
            </p>
        </div>
        <div>
            <img class="slideanimate" id="img1" alt="img1"
                src="https://p4css.github.io/webScroll/assets/taipei-1.jpg" />
        </div>
        <div style="padding:20%; background-color:black; height:20vh;">
            <p style="color:white;">
                從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：「從前有座山，山裏有座廟，廟裏有個老和尚和小和尚。老和尚對小和尚説：……」。」。」。
            </p>
        </div>
        <div>
            <img class="slideanimate" id="img2" alt="img2"
                src="https://p4css.github.io/webScroll/assets/taipei-1.jpg" />
        </div>
        <div id="v1frame" style="height:1000vh;">
            <div class="sticky-top" style="z-index:-1">
                <video id="video1" src="https://drive.google.com/file/d/1Gjfcq5EUJA1X4QqOfo2s0GXoxSzsSI9v/view"
                    style="width:100vw;"></video>
            </div>
            <div class="row" style="height:100vh">
                <div class="col-6"></div>
                <div class="col-6" style="height:100vh;background-color:rgba(0,0,0,0.5);"></div>
            </div>
        </div>
        <div style="height:100vh;background:grey;"></div>

    </div>
</body>